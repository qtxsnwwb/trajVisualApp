{"remainingRequest":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\src\\views\\Login.vue","mtime":1625651098911},{"path":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625218015435},{"path":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\node_modules\\babel-loader\\lib\\index.js","mtime":1625218015245},{"path":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1625218015435},{"path":"D:\\trajVisualApp\\trajVisualApp\\前端\\trajVisualApp\\node_modules\\vue-loader\\lib\\index.js","mtime":1625218023348}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: \"Login\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tform: {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t},\r\n\r\n\t\t\t// 表单验证，需要在 el-form-item 元素中增加 prop 属性\r\n\t\t\trules: {\r\n\t\t\t\tusername: [\r\n\t\t\t\t\t{required: true, message: '账号不可为空', trigger: 'blur'}\r\n\t\t\t\t],\r\n\t\t\t\tpassword: [\r\n\t\t\t\t\t{required: true, message: '密码不可为空', trigger: 'blur'}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\r\n\t\t\t// 对话框显示和隐藏\r\n\t\t\tdialogVisible: false,\r\n\t\t\tdialogInfo: '',\r\n\t\t\t\r\n\t\t\tuserInfo: ''\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonSubmit(formName) {\r\n\t\t\t// 为表单绑定验证功能\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\t// //存储登录状态\r\n\t\t\t\t\t// this.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t// localStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t//进行数据库验证\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"userName\", this.form.username);\r\n\t\t\t\t\tparams.append(\"userPass\", this.form.password);\r\n\t\t\t\t\t//前后端联调代码\r\n\t\t\t\t\tthis.axios.post('http://127.0.0.1:8000/users/userLogin/', params)\r\n\t\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\tif(response.data == \"success\"){\r\n\t\t\t\t\t\t\t//存储登录状态\r\n\t\t\t\t\t\t\tthis.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t\t\t//存储用户名\r\n\t\t\t\t\t\t\tthis.$store.dispatch(\"setUserNameAction\", this.form.username);\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"userName\", this.form.username);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//使用 vue-router 路由到指定页面，该方式称之为编程式导航\r\n\t\t\t\t\t\t\tthis.$router.push(\"/main\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.dialogInfo = \"用户名或密码输入错误\";\r\n\t\t\t\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\t\t\t\tthis.form.username = \"\";\r\n\t\t\t\t\t\t\t\tthis.form.password = \"\";\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this))\r\n\t\t\t\t\t.catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t//前端本地测试代码\r\n\t\t\t\t\tthis.axios.get('/user.json')\r\n\t\t\t\t\t\t\t.then(response => (this.userInfo = response.data));\r\n\t\t\t\t\tif(this.userInfo.loginSuccess == \"yes\"){      //验证成功\r\n\t\t\t\t\t\t//存储登录状态\r\n\t\t\t\t\t\tthis.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t\tlocalStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t\t//存储用户名\r\n\t\t\t\t\t\tthis.$store.dispatch(\"setUserNameAction\", this.form.username);\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userName\", this.form.username);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//使用 vue-router 路由到指定页面，该方式称之为编程式导航\r\n\t\t\t\t\t\tthis.$router.push(\"/main\");\r\n\t\t\t\t\t}else{      //验证失败\r\n\t\t\t\t\t\tthis.dialogInfo = \"用户名或密码输入错误\";\r\n\t\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\t\tthis.form.username = \"\";\r\n\t\t\t\t\t\tthis.form.password = \"\";\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.dialogInfo = \"请输入账号和密码\";\r\n\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"whole-container\">\r\n\t\t<div class=\"whole-container-image\"></div>\r\n\t\t<!-- 登录表单 -->\r\n\t\t<div class=\"login-container\">\r\n\t\t\t<div class=\"login-title\">MIPC账号登录</div>\r\n\t\t\t<el-form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" label-width=\"80px\" class=\"login-box\">\r\n\t\t\t\t<el-form-item label=\"账号\" prop=\"username\">\r\n\t\t\t\t\t<el-input type=\"text\" placeholder=\"请输入账号\" v-model=\"form.username\" name=\"userName\"/>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" prop=\"password\">\r\n\t\t\t\t\t<el-input type=\"text\" placeholder=\"请输入密码\" v-model=\"form.password\" name=\"userPass\"/>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit('loginForm')\" style=\"width: 91%;margin: 15px 0px 20px 30px;\">登录</el-button>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t\t\r\n\t\t<!-- 弹出框 -->\r\n\t\t<el-dialog title=\"温馨提示\" :visible.sync=\"dialogVisible\" width=\"30%\" :modal-append-to-body=\"false\">\r\n\t\t\t<span>{{dialogInfo}}</span>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"Login\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tform: {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t},\r\n\r\n\t\t\t// 表单验证，需要在 el-form-item 元素中增加 prop 属性\r\n\t\t\trules: {\r\n\t\t\t\tusername: [\r\n\t\t\t\t\t{required: true, message: '账号不可为空', trigger: 'blur'}\r\n\t\t\t\t],\r\n\t\t\t\tpassword: [\r\n\t\t\t\t\t{required: true, message: '密码不可为空', trigger: 'blur'}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\r\n\t\t\t// 对话框显示和隐藏\r\n\t\t\tdialogVisible: false,\r\n\t\t\tdialogInfo: '',\r\n\t\t\t\r\n\t\t\tuserInfo: ''\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonSubmit(formName) {\r\n\t\t\t// 为表单绑定验证功能\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\t// //存储登录状态\r\n\t\t\t\t\t// this.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t// localStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t//进行数据库验证\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"userName\", this.form.username);\r\n\t\t\t\t\tparams.append(\"userPass\", this.form.password);\r\n\t\t\t\t\t//前后端联调代码\r\n\t\t\t\t\tthis.axios.post('http://127.0.0.1:8000/users/userLogin/', params)\r\n\t\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\tif(response.data == \"success\"){\r\n\t\t\t\t\t\t\t//存储登录状态\r\n\t\t\t\t\t\t\tthis.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t\t\t//存储用户名\r\n\t\t\t\t\t\t\tthis.$store.dispatch(\"setUserNameAction\", this.form.username);\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"userName\", this.form.username);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//使用 vue-router 路由到指定页面，该方式称之为编程式导航\r\n\t\t\t\t\t\t\tthis.$router.push(\"/main\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.dialogInfo = \"用户名或密码输入错误\";\r\n\t\t\t\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\t\t\t\tthis.form.username = \"\";\r\n\t\t\t\t\t\t\t\tthis.form.password = \"\";\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this))\r\n\t\t\t\t\t.catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t//前端本地测试代码\r\n\t\t\t\t\tthis.axios.get('/user.json')\r\n\t\t\t\t\t\t\t.then(response => (this.userInfo = response.data));\r\n\t\t\t\t\tif(this.userInfo.loginSuccess == \"yes\"){      //验证成功\r\n\t\t\t\t\t\t//存储登录状态\r\n\t\t\t\t\t\tthis.$store.dispatch(\"userLogin\", true);\r\n\t\t\t\t\t\tlocalStorage.setItem(\"Flag\", \"isLogin\");\r\n\t\t\t\t\t\t//存储用户名\r\n\t\t\t\t\t\tthis.$store.dispatch(\"setUserNameAction\", this.form.username);\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userName\", this.form.username);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//使用 vue-router 路由到指定页面，该方式称之为编程式导航\r\n\t\t\t\t\t\tthis.$router.push(\"/main\");\r\n\t\t\t\t\t}else{      //验证失败\r\n\t\t\t\t\t\tthis.dialogInfo = \"用户名或密码输入错误\";\r\n\t\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\t\tthis.form.username = \"\";\r\n\t\t\t\t\t\tthis.form.password = \"\";\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.dialogInfo = \"请输入账号和密码\";\r\n\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.whole-container {\r\n\tposition: fixed;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\ttop: 0px;\r\n\tleft: 0px;\r\n}\r\n.whole-container-image {\r\n\tposition: fixed;\r\n\t// position: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\ttop: 0px;\r\n\tleft: 0px;\r\n\tbackground-image: url(\"../assets/login-bg.jpg\");\r\n\ttransform: translate3d(0px, 0px, 0px);\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n\tz-index: -1;\r\n\tfilter: brightness(40%);\r\n\t-webkit-filter: brightness(40%);\r\n}\r\n.login-container {\r\n\tbackground-color: #FFFFFF;\r\n\tborder: 1px solid #DCDFE6;\r\n\twidth: 360px;\r\n\theight: 310px;\r\n\tmargin: auto;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tborder-radius: 8px;\r\n\t-webkit-border-radius: 8px;\r\n\t-moz-border-radius: 8px;\r\n\tbox-shadow: 0 0 25px #909399;\r\n}\r\n\r\n.login-title {\r\n\ttext-align: center;\r\n\tmargin: 0 auto 40px auto;\r\n\tcolor: #fff;\r\n\tbackground-color: #5297f8;\r\n\tpadding-top: 15px;\r\n\tpadding-bottom: 15px;\r\n\tfont-size: 16px;\r\n}\r\n.login-box {\r\n\tpadding-right: 35px;\r\n}\r\n\r\n</style>\r\n"]}]}